# Generated by rust2rpm 28
# * Disable check to avoid test dependencies (prettydiff, test-generator)
%bcond check 0
%global debug_package %{nil}

%global crate regorus

Name:           rust-regorus
Version:        0.2.6
Release:        %autorelease
Summary:        Fast, lightweight Rego (OPA policy language) interpreter

License:        MIT AND Apache-2.0 AND BSD-3-Clause
URL:            https://crates.io/crates/regorus
Source:         %{crates_source}
# Manually created patch for downstream crate metadata changes
# * Patch out jsonschema feature (jsonschema crate not packaged)
# * Add missing license SPDX metadata, fixed upstream in 0.5.0 with additional
#   terms proposed in “Include all licenses in SPDX expression  and LICENSE
#   file,” https://github.com/microsoft/regorus/pull/540.
# * Update constant_time_eq from 0.3.0 to 0.4.2. Downstream-only because the
#   dependency is removed upstream in version 0.5.0.
Patch:          regorus-fix-metadata.diff
# * Add license text for `Apache-2.0` and the `BSD-3-Clause` license from Go’s
#   `time` module to `LICENSE`. Like `MIT`, both of these licenses require the
#   license text to be distributed with source and/or binaries.
# * This is the non-metadata portion of “Include all licenses in SPDX expression
#   and LICENSE file,” https://github.com/microsoft/regorus/pull/540.
Patch10:        regorus-0.2.6-missing-license-texts.patch

BuildRequires:  cargo-rpm-macros >= 24
BuildRequires:  git-core

%global _description %{expand:
A fast, lightweight Rego (OPA policy language) interpreter.}

%description %{_description}

%package        devel
Summary:        %{summary}
BuildArch:      noarch

%description    devel %{_description}

This package contains library source intended for building other packages which
use the "%{crate}" crate.

%files          devel
%license %{crate_instdir}/LICENSE
%doc %{crate_instdir}/CHANGELOG.md
%doc %{crate_instdir}/CODE_OF_CONDUCT.md
%doc %{crate_instdir}/README.md
%doc %{crate_instdir}/SECURITY.md
%doc %{crate_instdir}/SUPPORT.md
%{crate_instdir}/

%package     -n %{name}+default-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+default-devel %{_description}

This package contains library source intended for building other packages which
use the "default" feature of the "%{crate}" crate.

%files       -n %{name}+default-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+arc-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+arc-devel %{_description}

This package contains library source intended for building other packages which
use the "arc" feature of the "%{crate}" crate.

%files       -n %{name}+arc-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+ast-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+ast-devel %{_description}

This package contains library source intended for building other packages which
use the "ast" feature of the "%{crate}" crate.

%files       -n %{name}+ast-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+base64-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+base64-devel %{_description}

This package contains library source intended for building other packages which
use the "base64" feature of the "%{crate}" crate.

%files       -n %{name}+base64-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+base64url-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+base64url-devel %{_description}

This package contains library source intended for building other packages which
use the "base64url" feature of the "%{crate}" crate.

%files       -n %{name}+base64url-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+coverage-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+coverage-devel %{_description}

This package contains library source intended for building other packages which
use the "coverage" feature of the "%{crate}" crate.

%files       -n %{name}+coverage-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+crypto-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+crypto-devel %{_description}

This package contains library source intended for building other packages which
use the "crypto" feature of the "%{crate}" crate.

%files       -n %{name}+crypto-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+deprecated-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+deprecated-devel %{_description}

This package contains library source intended for building other packages which
use the "deprecated" feature of the "%{crate}" crate.

%files       -n %{name}+deprecated-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+full-opa-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+full-opa-devel %{_description}

This package contains library source intended for building other packages which
use the "full-opa" feature of the "%{crate}" crate.

%files       -n %{name}+full-opa-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+glob-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+glob-devel %{_description}

This package contains library source intended for building other packages which
use the "glob" feature of the "%{crate}" crate.

%files       -n %{name}+glob-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+graph-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+graph-devel %{_description}

This package contains library source intended for building other packages which
use the "graph" feature of the "%{crate}" crate.

%files       -n %{name}+graph-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+hex-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+hex-devel %{_description}

This package contains library source intended for building other packages which
use the "hex" feature of the "%{crate}" crate.

%files       -n %{name}+hex-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+http-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+http-devel %{_description}

This package contains library source intended for building other packages which
use the "http" feature of the "%{crate}" crate.

%files       -n %{name}+http-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+jwt-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+jwt-devel %{_description}

This package contains library source intended for building other packages which
use the "jwt" feature of the "%{crate}" crate.

%files       -n %{name}+jwt-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+no_std-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+no_std-devel %{_description}

This package contains library source intended for building other packages which
use the "no_std" feature of the "%{crate}" crate.

%files       -n %{name}+no_std-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+opa-no-std-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+opa-no-std-devel %{_description}

This package contains library source intended for building other packages which
use the "opa-no-std" feature of the "%{crate}" crate.

%files       -n %{name}+opa-no-std-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+opa-runtime-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+opa-runtime-devel %{_description}

This package contains library source intended for building other packages which
use the "opa-runtime" feature of the "%{crate}" crate.

%files       -n %{name}+opa-runtime-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+opa-testutil-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+opa-testutil-devel %{_description}

This package contains library source intended for building other packages which
use the "opa-testutil" feature of the "%{crate}" crate.

%files       -n %{name}+opa-testutil-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+rand-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+rand-devel %{_description}

This package contains library source intended for building other packages which
use the "rand" feature of the "%{crate}" crate.

%files       -n %{name}+rand-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+regex-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+regex-devel %{_description}

This package contains library source intended for building other packages which
use the "regex" feature of the "%{crate}" crate.

%files       -n %{name}+regex-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+rego-extensions-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+rego-extensions-devel %{_description}

This package contains library source intended for building other packages which
use the "rego-extensions" feature of the "%{crate}" crate.

%files       -n %{name}+rego-extensions-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+semver-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+semver-devel %{_description}

This package contains library source intended for building other packages which
use the "semver" feature of the "%{crate}" crate.

%files       -n %{name}+semver-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+serde_yaml-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+serde_yaml-devel %{_description}

This package contains library source intended for building other packages which
use the "serde_yaml" feature of the "%{crate}" crate.

%files       -n %{name}+serde_yaml-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+std-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+std-devel %{_description}

This package contains library source intended for building other packages which
use the "std" feature of the "%{crate}" crate.

%files       -n %{name}+std-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+time-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+time-devel %{_description}

This package contains library source intended for building other packages which
use the "time" feature of the "%{crate}" crate.

%files       -n %{name}+time-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+urlquery-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+urlquery-devel %{_description}

This package contains library source intended for building other packages which
use the "urlquery" feature of the "%{crate}" crate.

%files       -n %{name}+urlquery-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+uuid-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+uuid-devel %{_description}

This package contains library source intended for building other packages which
use the "uuid" feature of the "%{crate}" crate.

%files       -n %{name}+uuid-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+yaml-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+yaml-devel %{_description}

This package contains library source intended for building other packages which
use the "yaml" feature of the "%{crate}" crate.

%files       -n %{name}+yaml-devel
%ghost %{crate_instdir}/Cargo.toml

%prep
%autosetup -n %{crate}-%{version} -p1
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires

%build
%cargo_build

%install
%cargo_install

%if %{with check}
%check
%cargo_test
%endif

%changelog
%autochangelog
