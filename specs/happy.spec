# generated by cabal-rpm-2.3.2 --subpackage
# https://docs.fedoraproject.org/en-US/packaging-guidelines/Haskell/

%{?haskell_setup}

%global happylib_ver 2.1.7

%global happylib happy-lib-%{happylib_ver}

%global subpkgs %{happylib}

# failing (also in stackage)
%bcond tests 0

Name:           happy
Version:        2.1.7
# can only be reset when subpkg bumped
Release:        1%{?dist}
Summary:        Parser Generator for Haskell

License:        BSD-2-Clause
URL:            https://hackage.haskell.org/package/happy
# Begin cabal-rpm sources:
Source0:        https://hackage.haskell.org/package/%{name}-%{version}/%{name}-%{version}.tar.gz
Source1:        https://hackage.haskell.org/package/%{happylib}/%{happylib}.tar.gz
# End cabal-rpm sources

# Begin cabal-rpm deps:
BuildRequires:  ghc-rpm-macros-extra
BuildRequires:  ghc-Cabal-devel
BuildRequires:  ghc-array-devel
BuildRequires:  ghc-base-devel
BuildRequires:  ghc-containers-devel
#BuildRequires:  ghc-happy-lib-devel
BuildRequires:  ghc-mtl-devel
%if %{with ghc_prof}
BuildRequires:  ghc-array-prof
BuildRequires:  ghc-base-prof
BuildRequires:  ghc-containers-prof
#BuildRequires:  ghc-happy-lib-prof
BuildRequires:  ghc-mtl-prof
%endif
%if %{with tests}
BuildRequires:  ghc-process-devel
%endif
# for missing dep 'happy-lib':
BuildRequires:  ghc-transformers-devel
%if %{with ghc_prof}
BuildRequires:  ghc-transformers-prof
%endif
# End cabal-rpm deps
BuildRequires:  autoconf
BuildRequires:  docbook-dtds
BuildRequires:  docbook-style-xsl
BuildRequires:  libxml2
BuildRequires:  libxslt
BuildRequires:  make
Requires:       ghc-happy-lib-common

%description
Happy is a parser generator for Haskell. Given a grammar specification in BNF,
Happy generates Haskell code to parse the grammar. Happy works in a similar way
to the 'yacc' tool for C.


%global main_version %{version}

%package -n ghc-happy-lib-common
Version: %{happylib_ver}
Summary: Common data files for happy-lib
BuildArch: noarch
License: BSD-2-Clause

%description -n ghc-happy-lib-common
This package provides the data files for the happy-lib library.

%if %{defined ghclibdir}
%ghc_lib_subpackage -l BSD-2-Clause -c ghc-happy-lib-common %{happylib}
%endif

%global version %{main_version}


%prep
# Begin cabal-rpm setup:
%setup -q -a1
# End cabal-rpm setup


%build
# Begin cabal-rpm build:
%ghc_libs_build %{subpkgs}
%ghc_bin_build
# End cabal-rpm build


%install
# Begin cabal-rpm install
%ghc_libs_install %{subpkgs}
%ghc_bin_install
# End cabal-rpm install


%check
%if %{with tests}
PATH=%{buildroot}%{_bindir}:$PATH
%cabal_test
%endif


%files
# Begin cabal-rpm files:
%license LICENSE
%doc ChangeLog.md README.md examples
%{_bindir}/%{name}
# End cabal-rpm files


%files -n ghc-happy-lib-common
%{_datadir}/%{happylib}


%changelog
* Mon Jan 26 2026 Jens Petersen <petersen@redhat.com> - 2.1.7-5
- https://hackage.haskell.org/package/happy-2.1.7/changelog

* Fri Jan 16 2026 Fedora Release Engineering <releng@fedoraproject.org> - 2.0.2-4
- Rebuilt for https://fedoraproject.org/wiki/Fedora_44_Mass_Rebuild

* Thu Jul 24 2025 Fedora Release Engineering <releng@fedoraproject.org> - 2.0.2-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_43_Mass_Rebuild

* Mon Apr 07 2025 Jens Petersen <petersen@redhat.com> - 2.0.2-2
- Rebuild

* Tue Mar 25 2025 Jens Petersen <petersen@redhat.com> - 2.0.2-1
- https://hackage.haskell.org/package/happy-2.0.2/changelog
- add happy-lib

* Sun Feb 23 2025 Jens Petersen <petersen@redhat.com> - 1.20.1.1-8
- cabal-rpm-2.3.0

* Fri Jan 17 2025 Fedora Release Engineering <releng@fedoraproject.org> - 1.20.1.1-7
- Rebuilt for https://fedoraproject.org/wiki/Fedora_42_Mass_Rebuild

* Mon Aug 05 2024 Jens Petersen <petersen@redhat.com> - 1.20.1.1-6
- bump release

* Thu Jul 18 2024 Fedora Release Engineering <releng@fedoraproject.org> - 1.20.1.1-5
- Rebuilt for https://fedoraproject.org/wiki/Fedora_41_Mass_Rebuild

* Tue Jul 16 2024 Jens Petersen <petersen@redhat.com> - 1.20.1.1-4
- refresh to cabal-rpm-2.2.1

* Wed Jan 24 2024 Fedora Release Engineering <releng@fedoraproject.org> - 1.20.1.1-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild

* Sat Jan 20 2024 Fedora Release Engineering <releng@fedoraproject.org> - 1.20.1.1-2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild

* Sun Jul 23 2023 Jens Petersen <petersen@redhat.com> - 1.20.1.1-1
- https://hackage.haskell.org/package/happy-1.20.1.1/changelog

* Thu Jul 20 2023 Fedora Release Engineering <releng@fedoraproject.org> - 1.20.0-10
- Rebuilt for https://fedoraproject.org/wiki/Fedora_39_Mass_Rebuild

* Thu Feb 16 2023 Jens Petersen <petersen@redhat.com> - 1.20.0-6
- refresh to cabal-rpm-2.1.0 with SPDX migration

* Thu Jul 21 2022 Fedora Release Engineering <releng@fedoraproject.org> - 1.20.0-5
- Rebuilt for https://fedoraproject.org/wiki/Fedora_37_Mass_Rebuild

* Fri Jun 17 2022 Jens Petersen <petersen@redhat.com> - 1.20.0-4
- rebuild

* Thu Jan 20 2022 Fedora Release Engineering <releng@fedoraproject.org> - 1.20.0-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_36_Mass_Rebuild

* Sat Jan 08 2022 Miro Hrončok <mhroncok@redhat.com> - 1.20.0-2
- Rebuilt for https://fedoraproject.org/wiki/Changes/LIBFFI34

* Thu Aug  5 2021 Jens Petersen <petersen@redhat.com> - 1.20.0-1
- update to 1.20.0

* Thu Jul 22 2021 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.12-5
- Rebuilt for https://fedoraproject.org/wiki/Fedora_35_Mass_Rebuild

* Tue Jan 26 2021 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.12-4
- Rebuilt for https://fedoraproject.org/wiki/Fedora_34_Mass_Rebuild

* Tue Jul 28 2020 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.12-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_33_Mass_Rebuild

* Fri Jul 17 2020 Jens Petersen <petersen@redhat.com> - 1.19.12-2
- refresh to cabal-rpm-2.0.6

* Fri Feb 14 2020 Jens Petersen <petersen@redhat.com> - 1.19.12-1
- update to 1.19.12

* Wed Jan 29 2020 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.11-2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_32_Mass_Rebuild

* Thu Jul 25 2019 Jens Petersen <petersen@redhat.com> - 1.19.11-1
- update to 1.19.11

* Thu Jul 25 2019 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.9-5
- Rebuilt for https://fedoraproject.org/wiki/Fedora_31_Mass_Rebuild

* Wed Feb 27 2019 Jens Petersen <petersen@redhat.com> - 1.19.9-4
- refresh to cabal-rpm-0.13

* Fri Feb 01 2019 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.9-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_30_Mass_Rebuild

* Wed Oct 24 2018 Jens Petersen <petersen@redhat.com> - 1.19.9-2
- rebuild for static executable

* Sun Jul 22 2018 Jens Petersen <petersen@redhat.com> - 1.19.9-1
- update to 1.19.9

* Fri Jul 13 2018 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.8-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_29_Mass_Rebuild

* Wed Feb 07 2018 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.8-2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_28_Mass_Rebuild

* Wed Jan 24 2018 Jens Petersen <petersen@redhat.com> - 1.19.8-1
- update to 1.19.8

* Wed Aug 02 2017 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.5-10
- Rebuilt for https://fedoraproject.org/wiki/Fedora_27_Binutils_Mass_Rebuild

* Wed Jul 26 2017 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.5-9
- Rebuilt for https://fedoraproject.org/wiki/Fedora_27_Mass_Rebuild

* Fri Feb 24 2017 Jens Petersen <petersen@redhat.com> - 1.19.5-8
- refresh to cabal-rpm-0.11.1

* Fri Feb 10 2017 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.5-7
- Rebuilt for https://fedoraproject.org/wiki/Fedora_26_Mass_Rebuild

* Sat Jan 21 2017 Jens Petersen <petersen@redhat.com> - 1.19.5-6
- drop static and common subpackages

* Wed Feb 03 2016 Fedora Release Engineering <releng@fedoraproject.org> - 1.19.5-5
- Rebuilt for https://fedoraproject.org/wiki/Fedora_24_Mass_Rebuild

* Thu Sep 17 2015 Jens Petersen <petersen@redhat.com> - 1.19.5-4
- use license macro
- disable testsuite since it fails (under ghc-7.10)

* Wed Jun 17 2015 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 1.19.5-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_23_Mass_Rebuild

* Fri May 22 2015 Jens Petersen <petersen@redhat.com> - 1.19.5-2
- add static and common subpackages
- dynamic and static are handled as alternatives

* Fri Apr 03 2015 Jens Petersen <petersen@redhat.com> - 1.19.5-1
- update to 1.19.5

* Thu Aug  7 2014 Jens Petersen <petersen@redhat.com> - 1.19.4-1
- update to 1.19.4

* Tue Jul  8 2014 Jens Petersen <petersen@redhat.com> - 1.18.10-35
- update to cblrpm-0.8.11

* Fri Apr 11 2014 Jens Petersen <petersen@redhat.com> - 1.18.10-34
- split out of haskell-platform
- update to 1.18.10

* Tue Mar 20 2012 Jens Petersen <petersen@redhat.com> - 1.18.9-1
- update to 1.18.9

* Fri Jan 13 2012 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 1.18.6-8.2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_17_Mass_Rebuild

* Fri Oct 21 2011 Marcela Mašláňová <mmaslano@redhat.com> - 1.18.6-7.2
- rebuild with new gmp without compat lib

* Tue Oct 11 2011 Peter Schiffer <pschiffe@redhat.com> - 1.18.6-7.1
- rebuild with new gmp

* Tue Jun 21 2011 Jens Petersen <petersen@redhat.com> - 1.18.6-7
- ghc_arches replaces ghc_excluded_archs

* Mon Jun 20 2011 Jens Petersen <petersen@redhat.com> - 1.18.6-6
- BR ghc-Cabal-devel and use ghc_excluded_archs

* Wed May 25 2011 Jens Petersen <petersen@redhat.com> - 1.18.6-5
- add ppc64

* Thu Mar 10 2011 Fabio M. Di Nitto <fdinitto@redhat.com> - 1.18.6-4
- Enable build on sparcv9

* Wed Feb 09 2011 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 1.18.6-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_15_Mass_Rebuild

* Sat Jan 15 2011 Jens Petersen <petersen@redhat.com> - 1.18.6-2
- update to cabal2spec-0.22.4
- BR ghc-devel

* Sun Dec  5 2010 Jens Petersen <petersen@redhat.com> - 1.18.6-1
- update to 1.18.6

* Thu Nov 25 2010 Jens Petersen <petersen@redhat.com> - 1.18.5-2
- rebuild

* Fri Jul 16 2010 Jens Petersen <petersen@redhat.com> - 1.18.5-1
- update to 1.18.5 for haskell-platform-2010.2.0.0
- use new build macros from ghc-rpm-macros-0.7.0

* Sat Jun 26 2010 Jens Petersen <petersen@redhat.com> - 1.18.4-8
- link dynamically again
- strip program (cabal2spec-0.21.4)

* Wed Jun 23 2010 Jens Petersen <petersen@redhat.com> - 1.18.4-7
- don't link dynamically since happy is needed to build ghc

* Tue Apr 27 2010 Jens Petersen <petersen@redhat.com> - 1.18.4-6
- rebuild against ghc-6.12.2

* Mon Jan 11 2010 Jens Petersen <petersen@redhat.com> - 1.18.4-5
- rebuild with ghc-6.12.1
- link dynamically
- buildrequires ghc-mtl-devel
- drop redundant buildroot and its install cleaning

* Thu Oct  1 2009 Jens Petersen <petersen@redhat.com> - 1.18.4-4
- selinux fcontext no longer needed in post script

* Fri Jul 24 2009 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 1.18.4-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_12_Mass_Rebuild

* Sun May 17 2009 Jens Petersen <petersen@redhat.com> - 1.18.4-2
- buildrequires ghc-rpm-macros

* Sat Apr 25 2009 Jens Petersen <petersen@redhat.com> - 1.18.4-1
- 1.18.4 release

* Wed Feb 25 2009 Jens Petersen <petersen@redhat.com> - 1.18.2-3
- rebuild with %%ix86 for i586

* Mon Feb 23 2009 Jens Petersen <petersen@redhat.com> - 1.18.2-2
- cabal build replaces cabal_build

* Wed Nov 12 2008 Jens Petersen <petersen@redhat.com> - 1.18.2-1
- update to 1.18.2 release from hackage
- update to new packaging macros
- turn off debuginfo

* Tue Oct 14 2008 Jens Petersen <petersen@redhat.com> - 1.17-3
- add selinux unconfined_execmem_exec_t file context

* Mon Feb 18 2008 Fedora Release Engineering <rel-eng@fedoraproject.org> - 1.17-2
- Autorebuild for GCC 4.3

* Fri Jan  4 2008 Jens Petersen <petersen@redhat.com> - 1.17-1
- update to 1.17 release

* Fri Nov 23 2007 Bryan O'Sullivan <bos@serpentine.com> - 1.16-3
- Exclude alpha and ppc64

* Thu Aug 16 2007 Jens Petersen <petersen@redhat.com>
- update License field

* Sun Mar 25 2007 Bryan O'Sullivan <bos@serpentine.com> - 1.16-2
- fix a few style issues pointed out by Jens

* Fri Jan 19 2007 Bryan O'Sullivan <bos@serpentine.com> - 1.16-1
- update to 1.16
- fix rpmlint warnings

* Fri Jan 21 2005 Jens Petersen <petersen@haskell.org> - 1.15-2
- initial packaging based on spec file from tarball
- setup libdir for x86_64
