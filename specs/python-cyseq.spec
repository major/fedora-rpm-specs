Name:           python-cyseq
Version:        0.1.2
Release:        %autorelease
Summary:        A Cython version of ScanCode-toolkit's licensedcode.seq

License:        Apache-2.0
URL:            https://github.com/aboutcode-org/cyseq
Source:         %{pypi_source cyseq}

BuildRequires:  gcc-c++
BuildRequires:  python3-devel
BuildRequires:  %{py3_dist pytest}


%global _description %{expand:
This library is a Cython version of scancode-toolkit's `licensedcode.seq`.}

%description %_description

%package -n     python3-cyseq
Summary:        %{summary}

%description -n python3-cyseq %_description


%prep
%autosetup -p1 -n cyseq-%{version}
# Ensure that Cython-generated code is rebuilt
rm -vf $(grep -rl 'Generated by Cython' src)


%generate_buildrequires
%pyproject_buildrequires


%build
%pyproject_wheel


%install
%pyproject_install
%pyproject_save_files -l cyseq


%check
%pytest tests


%files -n python3-cyseq -f %{pyproject_files}
%doc README.rst


%changelog
%autochangelog
