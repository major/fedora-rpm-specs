# Generated by rust2rpm 27
%bcond check 1

# prevent library files from being installed
%global cargo_install_lib 0

Name:           bign-handheld-thumbnailer
Version:        1.1.3
Release:        1%{?dist}
Summary:        Thumbnailer for Nintendo handheld game consoles

SourceLicense:  GPL-2.0-or-later
# 0BSD OR MIT OR Apache-2.0
# Apache-2.0 OR MIT
# GPL-2.0-or-later
# MIT
# MIT OR Apache-2.0
# MIT OR Zlib OR Apache-2.0
# Unlicense OR MIT
# Zlib OR Apache-2.0 OR MIT
License:        GPL-2.0-or-later AND MIT AND (0BSD OR Apache-2.0 OR MIT) AND (Apache-2.0 OR MIT) AND (Apache-2.0 OR MIT OR Zlib) AND (MIT OR Unlicense)
# LICENSE.dependencies contains a full license breakdown

URL:            https://github.com/MateusRodCosta/bign-handheld-thumbnailer
Source:         https://github.com/MateusRodCosta/bign-handheld-thumbnailer/archive/refs/tags/v%{version}.tar.gz

BuildRequires:  cargo-rpm-macros >= 26
BuildRequires:  meson

%global _description %{expand:
Thumbnailer for Nintendo handheld game consoles (DS and 3DS) roms and homebrew.}

%description %{_description}

%prep
%autosetup -n bign-handheld-thumbnailer-%{version} -p1
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires

%build
%meson -Dupdate_mime_database=false -Dgenerate_metainfo=true
%meson_build
%{cargo_license_summary}
%{cargo_license} > LICENSE.dependencies

%install
%meson_install

%if %{with check}
%check
%cargo_test
%endif

%files
%license LICENSE
%license LICENSE.dependencies
%doc README.md
%{_bindir}/bign-handheld-thumbnailer
%dir %{_datadir}/mime
%dir %{_datadir}/mime/packages
%dir %{_datadir}/thumbnailers
%{_datadir}/mime/packages/bign-handheld-thumbnailer-3ds.xml
%{_datadir}/thumbnailers/bign-handheld-thumbnailer.thumbnailer
%{_metainfodir}/dev.mateusrodcosta.bign_handheld_thumbnailer.metainfo.xml

%changelog
* Tue Jul 15 2025 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 1.1.3-1
- Update to 1.1.3
- Update summary and description
- Remove meson_options.txt

* Wed Jan 29 2025 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 1.1.2-2
- Own unowned directories under /usr/share

* Mon Jan 27 2025 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 1.1.2-1
- Update to 1.1.2
- Regenerate spec with rust2rpm 27 and adapt existing one

* Fri Nov 22 2024 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 1.1.1-1
- Update to 1.1.1

* Mon Sep 09 2024 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 1.1.0-1
- Update to 1.1.0

* Mon May 20 2024 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 1.0.1-2
- Add forgotten dist tag

* Sat May 18 2024 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 1.0.1-1
- Update to 1.0.1
- Switch to new upstream meson build system
- Start using manual RPM changelogs and add previous missing changelogs

* Mon May 06 2024 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 1.0.0-1
- Update to 1.0.0

* Thu May 02 2024 Mateus Rodrigues Costa <mateusrodcosta@gmail.com> - 0.9.0-1
- Initial packaging
