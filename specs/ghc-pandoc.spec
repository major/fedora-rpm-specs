# generated by cabal-rpm-2.3.2 --subpackage
# https://docs.fedoraproject.org/en-US/packaging-guidelines/Haskell/

%global pkg_name pandoc
%global pkgver %{pkg_name}-%{version}
%{?haskell_setup}

%global citeproc citeproc-0.8.1.3
%global commonmark commonmark-0.2.6.1
%global commonmarkextensions commonmark-extensions-0.2.6
%global commonmarkpandoc commonmark-pandoc-0.2.3
%global digits digits-0.3.1
%global djot djot-0.1.2.2
%global gridtables gridtables-0.1.0.0
%global ipynb ipynb-0.2
%global jirawikimarkup jira-wiki-markup-1.5.1
%global orderedcontainers ordered-containers-0.2.4
%global typst typst-0.7
%global unicodecollation unicode-collation-0.1.3.6

%global subpkgs %{commonmark} %{commonmarkextensions} %{commonmarkpandoc} %{digits} %{djot} %{gridtables} %{ipynb} %{jirawikimarkup} %{orderedcontainers} %{typst} %{unicodecollation} %{citeproc}

# testsuite missing deps: tasty-golden

Name:           ghc-%{pkg_name}
Version:        3.6.4
# can only be reset when all subpkgs bumped
Release:        37%{?dist}
Summary:        Haskell %{name} library

License:        GPL-2.0-or-later
URL:            https://hackage.haskell.org/package/pandoc
# Begin cabal-rpm sources:
Source0:        https://hackage.haskell.org/package/%{pkgver}/%{pkgver}.tar.gz
Source1:        https://hackage.haskell.org/package/%{citeproc}/%{citeproc}.tar.gz
Source2:        https://hackage.haskell.org/package/%{commonmark}/%{commonmark}.tar.gz
Source3:        https://hackage.haskell.org/package/%{commonmarkextensions}/%{commonmarkextensions}.tar.gz
Source4:        https://hackage.haskell.org/package/%{commonmarkpandoc}/%{commonmarkpandoc}.tar.gz
Source5:        https://hackage.haskell.org/package/%{digits}/%{digits}.tar.gz
Source6:        https://hackage.haskell.org/package/%{djot}/%{djot}.tar.gz
Source7:        https://hackage.haskell.org/package/%{gridtables}/%{gridtables}.tar.gz
Source8:        https://hackage.haskell.org/package/%{ipynb}/%{ipynb}.tar.gz
Source9:        https://hackage.haskell.org/package/%{jirawikimarkup}/%{jirawikimarkup}.tar.gz
Source10:       https://hackage.haskell.org/package/%{orderedcontainers}/%{orderedcontainers}.tar.gz
Source11:       https://hackage.haskell.org/package/%{typst}/%{typst}.tar.gz
Source12:       https://hackage.haskell.org/package/%{unicodecollation}/%{unicodecollation}.tar.gz
# End cabal-rpm sources

# Begin cabal-rpm deps:
BuildRequires:  ghc-Cabal-devel
BuildRequires:  ghc-rpm-macros-extra
BuildRequires:  ghc-Glob-devel
BuildRequires:  ghc-JuicyPixels-devel
BuildRequires:  ghc-aeson-devel
BuildRequires:  ghc-aeson-pretty-devel
BuildRequires:  ghc-array-devel
BuildRequires:  ghc-attoparsec-devel
BuildRequires:  ghc-base-devel
BuildRequires:  ghc-base64-bytestring-devel
BuildRequires:  ghc-binary-devel
BuildRequires:  ghc-blaze-html-devel
BuildRequires:  ghc-blaze-markup-devel
BuildRequires:  ghc-bytestring-devel
BuildRequires:  ghc-case-insensitive-devel
#BuildRequires:  ghc-citeproc-devel
#BuildRequires:  ghc-commonmark-devel
#BuildRequires:  ghc-commonmark-extensions-devel
#BuildRequires:  ghc-commonmark-pandoc-devel
BuildRequires:  ghc-containers-devel
BuildRequires:  ghc-crypton-devel
BuildRequires:  ghc-crypton-connection-devel
BuildRequires:  ghc-crypton-x509-system-devel
BuildRequires:  ghc-data-default-devel
BuildRequires:  ghc-deepseq-devel
BuildRequires:  ghc-directory-devel
#BuildRequires:  ghc-djot-devel
BuildRequires:  ghc-doclayout-devel
BuildRequires:  ghc-doctemplates-devel
BuildRequires:  ghc-emojis-devel
BuildRequires:  ghc-exceptions-devel
BuildRequires:  ghc-file-embed-devel
BuildRequires:  ghc-filepath-devel
#BuildRequires:  ghc-gridtables-devel
BuildRequires:  ghc-haddock-library-devel
BuildRequires:  ghc-http-client-devel
BuildRequires:  ghc-http-client-tls-devel
BuildRequires:  ghc-http-types-devel
#BuildRequires:  ghc-ipynb-devel
#BuildRequires:  ghc-jira-wiki-markup-devel
BuildRequires:  ghc-libyaml-devel
BuildRequires:  ghc-mime-types-devel
BuildRequires:  ghc-mtl-devel
BuildRequires:  ghc-network-devel
BuildRequires:  ghc-network-uri-devel
BuildRequires:  ghc-pandoc-types-devel
BuildRequires:  ghc-parsec-devel
BuildRequires:  ghc-pretty-devel
BuildRequires:  ghc-pretty-show-devel
BuildRequires:  ghc-process-devel
BuildRequires:  ghc-random-devel
BuildRequires:  ghc-safe-devel
BuildRequires:  ghc-scientific-devel
BuildRequires:  ghc-skylighting-devel
BuildRequires:  ghc-skylighting-core-devel
BuildRequires:  ghc-split-devel
BuildRequires:  ghc-syb-devel
BuildRequires:  ghc-tagsoup-devel
BuildRequires:  ghc-temporary-devel
BuildRequires:  ghc-texmath-devel
BuildRequires:  ghc-text-devel
BuildRequires:  ghc-text-conversions-devel
BuildRequires:  ghc-time-devel
BuildRequires:  ghc-tls-devel
#BuildRequires:  ghc-typst-devel
#BuildRequires:  ghc-unicode-collation-devel
BuildRequires:  ghc-unicode-transforms-devel
BuildRequires:  ghc-unix-devel
BuildRequires:  ghc-vector-devel
BuildRequires:  ghc-xml-devel
BuildRequires:  ghc-xml-conduit-devel
BuildRequires:  ghc-xml-types-devel
BuildRequires:  ghc-yaml-devel
BuildRequires:  ghc-zip-archive-devel
BuildRequires:  ghc-zlib-devel
%if %{with ghc_prof}
BuildRequires:  ghc-Glob-prof
BuildRequires:  ghc-JuicyPixels-prof
BuildRequires:  ghc-aeson-prof
BuildRequires:  ghc-aeson-pretty-prof
BuildRequires:  ghc-array-prof
BuildRequires:  ghc-attoparsec-prof
BuildRequires:  ghc-base-prof
BuildRequires:  ghc-base64-bytestring-prof
BuildRequires:  ghc-binary-prof
BuildRequires:  ghc-blaze-html-prof
BuildRequires:  ghc-blaze-markup-prof
BuildRequires:  ghc-bytestring-prof
BuildRequires:  ghc-case-insensitive-prof
#BuildRequires:  ghc-citeproc-prof
#BuildRequires:  ghc-commonmark-prof
#BuildRequires:  ghc-commonmark-extensions-prof
#BuildRequires:  ghc-commonmark-pandoc-prof
BuildRequires:  ghc-containers-prof
BuildRequires:  ghc-crypton-prof
BuildRequires:  ghc-crypton-connection-prof
BuildRequires:  ghc-crypton-x509-system-prof
BuildRequires:  ghc-data-default-prof
BuildRequires:  ghc-deepseq-prof
BuildRequires:  ghc-directory-prof
#BuildRequires:  ghc-djot-prof
BuildRequires:  ghc-doclayout-prof
BuildRequires:  ghc-doctemplates-prof
BuildRequires:  ghc-emojis-prof
BuildRequires:  ghc-exceptions-prof
BuildRequires:  ghc-file-embed-prof
BuildRequires:  ghc-filepath-prof
#BuildRequires:  ghc-gridtables-prof
BuildRequires:  ghc-haddock-library-prof
BuildRequires:  ghc-http-client-prof
BuildRequires:  ghc-http-client-tls-prof
BuildRequires:  ghc-http-types-prof
#BuildRequires:  ghc-ipynb-prof
#BuildRequires:  ghc-jira-wiki-markup-prof
BuildRequires:  ghc-libyaml-prof
BuildRequires:  ghc-mime-types-prof
BuildRequires:  ghc-mtl-prof
BuildRequires:  ghc-network-prof
BuildRequires:  ghc-network-uri-prof
BuildRequires:  ghc-pandoc-types-prof
BuildRequires:  ghc-parsec-prof
BuildRequires:  ghc-pretty-prof
BuildRequires:  ghc-pretty-show-prof
BuildRequires:  ghc-process-prof
BuildRequires:  ghc-random-prof
BuildRequires:  ghc-safe-prof
BuildRequires:  ghc-scientific-prof
BuildRequires:  ghc-skylighting-prof
BuildRequires:  ghc-skylighting-core-prof
BuildRequires:  ghc-split-prof
BuildRequires:  ghc-syb-prof
BuildRequires:  ghc-tagsoup-prof
BuildRequires:  ghc-temporary-prof
BuildRequires:  ghc-texmath-prof
BuildRequires:  ghc-text-prof
BuildRequires:  ghc-text-conversions-prof
BuildRequires:  ghc-time-prof
BuildRequires:  ghc-tls-prof
#BuildRequires:  ghc-typst-prof
#BuildRequires:  ghc-unicode-collation-prof
BuildRequires:  ghc-unicode-transforms-prof
BuildRequires:  ghc-unix-prof
BuildRequires:  ghc-vector-prof
BuildRequires:  ghc-xml-prof
BuildRequires:  ghc-xml-conduit-prof
BuildRequires:  ghc-xml-types-prof
BuildRequires:  ghc-yaml-prof
BuildRequires:  ghc-zip-archive-prof
BuildRequires:  ghc-zlib-prof
%endif
# for missing dep 'citeproc':
BuildRequires:  ghc-transformers-devel
BuildRequires:  ghc-uniplate-devel
%if %{with ghc_prof}
BuildRequires:  ghc-transformers-prof
BuildRequires:  ghc-uniplate-prof
%endif
# for missing dep 'commonmark':
BuildRequires:  ghc-transformers-devel
BuildRequires:  ghc-unicode-data-devel
%if %{with ghc_prof}
BuildRequires:  ghc-transformers-prof
BuildRequires:  ghc-unicode-data-prof
%endif
# for missing dep 'commonmark-extensions':
BuildRequires:  ghc-transformers-devel
%if %{with ghc_prof}
BuildRequires:  ghc-transformers-prof
%endif
# for missing dep 'digits':
BuildRequires:  ghc-QuickCheck-devel
%if %{with ghc_prof}
BuildRequires:  ghc-QuickCheck-prof
%endif
# for missing dep 'djot':
BuildRequires:  ghc-template-haskell-devel
%if %{with ghc_prof}
BuildRequires:  ghc-template-haskell-prof
%endif
# for missing dep 'ipynb':
BuildRequires:  ghc-unordered-containers-devel
%if %{with ghc_prof}
BuildRequires:  ghc-unordered-containers-prof
%endif
# for missing dep 'ordered-containers':
BuildRequires:  ghc-hashable-devel
%if %{with ghc_prof}
BuildRequires:  ghc-hashable-prof
%endif
# for missing dep 'typst':
BuildRequires:  ghc-cassava-devel
BuildRequires:  ghc-regex-tdfa-devel
BuildRequires:  ghc-toml-parser-devel
BuildRequires:  ghc-typst-symbols-devel
%if %{with ghc_prof}
BuildRequires:  ghc-cassava-prof
BuildRequires:  ghc-regex-tdfa-prof
BuildRequires:  ghc-toml-parser-prof
BuildRequires:  ghc-typst-symbols-prof
%endif
# for missing dep 'unicode-collation':
BuildRequires:  ghc-template-haskell-devel
BuildRequires:  ghc-th-lift-instances-devel
%if %{with ghc_prof}
BuildRequires:  ghc-template-haskell-prof
BuildRequires:  ghc-th-lift-instances-prof
%endif
# End cabal-rpm deps
Requires:       pandoc-common = %{version}-%{release}

%description
Pandoc is a Haskell library for converting from one markup format to another.
The formats it can handle include

- light markup formats (many variants of Markdown, reStructuredText, AsciiDoc,
Org-mode, Muse, Textile, txt2tags, djot) - HTML formats (HTML 4 and 5) - Ebook
formats (EPUB v2 and v3, FB2) - Documentation formats (GNU TexInfo, Haddock) -
Roff formats (man, ms) - TeX formats (LaTeX, ConTeXt) - Typst - XML formats
(DocBook 4 and 5, JATS, TEI Simple, OpenDocument) - Outline formats (OPML) -
Bibliography formats (BibTeX, BibLaTeX, CSL JSON, CSL YAML, RIS) - Word
processor formats (Docx, RTF, ODT) - Interactive notebook formats (Jupyter
notebook ipynb) - Page layout formats (InDesign ICML) - Wiki markup formats
(MediaWiki, DokuWiki, TikiWiki, TWiki, Vimwiki, XWiki, ZimWiki, Jira wiki,
Creole) - Slide show formats (LaTeX Beamer, PowerPoint, Slidy, reveal.js,
Slideous, S5, DZSlides) - Data formats (CSV and TSV tables) - PDF (via external
programs such as pdflatex or wkhtmltopdf)

Pandoc can convert mathematical content in documents between TeX, MathML, Word
equations, roff eqn, typst, and plain text. It includes a powerful system for
automatic citations and bibliographies, and it can be customized extensively
using templates, filters, and custom readers and writers written in Lua.

For the pandoc command-line program, see the 'pandoc-cli' package.


%package devel
Summary:        Haskell %{pkg_name} library development files
Provides:       %{name}-static = %{version}-%{release}
Provides:       %{name}-static%{?_isa} = %{version}-%{release}
%if %{defined ghc_version}
Requires:       ghc-compiler = %{ghc_version}
%endif
Requires:       %{name}%{?_isa} = %{version}-%{release}

%description devel
This package provides the Haskell %{pkg_name} library development files.


%if %{with haddock}
%package doc
Summary:        Haskell %{pkg_name} library documentation
BuildArch:      noarch
Requires:       ghc-filesystem

%description doc
This package provides the Haskell %{pkg_name} library documentation.
%endif


%if %{with ghc_prof}
%package prof
Summary:        Haskell %{pkg_name} profiling library
Requires:       %{name}-devel%{?_isa} = %{version}-%{release}
Supplements:    (%{name}-devel and ghc-prof)

%description prof
This package provides the Haskell %{pkg_name} profiling library.
%endif


%package -n pandoc-common
Summary:        Pandoc common data files
# templates are dual: GPLv2+ or BSD
# data/dzslides/template.html js and css: DWTFYWTPL
License: GPL-2.0-or-later AND (GPL-2.0-or-later OR BSD-3-Clause) AND WTFPL
BuildArch:      noarch

%description -n pandoc-common
This package provides pandoc's common data files.


%global main_version %{version}

%if %{defined ghclibdir}
%ghc_lib_subpackage -l BSD-2-Clause %{citeproc}
%ghc_lib_subpackage -l BSD-3-Clause %{commonmark}
%ghc_lib_subpackage -l BSD-3-Clause %{commonmarkextensions}
%ghc_lib_subpackage -l BSD-3-Clause %{commonmarkpandoc}
%ghc_lib_subpackage -l BSD-3-Clause %{digits}
%ghc_lib_subpackage -l MIT %{djot}
%ghc_lib_subpackage -l MIT %{gridtables}
%ghc_lib_subpackage -l BSD-3-Clause %{ipynb}
%ghc_lib_subpackage -l MIT %{jirawikimarkup}
%ghc_lib_subpackage -l BSD-3-Clause %{orderedcontainers}
%ghc_lib_subpackage -l BSD-3-Clause %{typst}
%ghc_lib_subpackage -l BSD-2-Clause %{unicodecollation}
%endif

%global version %{main_version}


%prep
# Begin cabal-rpm setup:
%setup -q -n %{pkgver} -a1 -a2 -a3 -a4 -a5 -a6 -a7 -a8 -a9 -a10 -a11 -a12
# End cabal-rpm setup

# Not in scope: ‘runTests’
rm %{digits}/Setup.lhs

( cd %{gridtables}
  cabal-tweak-dep-ver text '< 2.1' '< 2.2'
)
( cd %{jirawikimarkup}
  cabal-tweak-dep-ver text '< 2.1' '< 2.2'
)


%build
# Begin cabal-rpm build:
%ghc_libs_build %{subpkgs}
%ghc_lib_build
# End cabal-rpm build


%install
# Begin cabal-rpm install
%ghc_libs_install %{subpkgs}
%ghc_lib_install
mv %{buildroot}%{_ghclicensedir}/{%{name},pandoc-common}
# End cabal-rpm install

rm %{buildroot}%{_datadir}/%{pkgver}/COPYRIGHT

echo %{_bindir}/djoths >> %{djot}/ghc-djot.files
echo %{_bindir}/jira-wiki-markup >> %{jirawikimarkup}/ghc-jira-wiki-markup.files


%files -f %{name}.files
# Begin cabal-rpm files:
%license COPYING.md
# End cabal-rpm files


%files devel -f %{name}-devel.files


%if %{with haddock}
%files doc -f %{name}-doc.files
%license COPYING.md
%endif


%if %{with ghc_prof}
%files prof -f %{name}-prof.files
%endif


%files -n pandoc-common
# Begin cabal-rpm files:
%license COPYING.md COPYRIGHT
%doc AUTHORS.md BUGS CONTRIBUTING.md README.md changelog.md
%{_datadir}/%{pkgver}
# End cabal-rpm files


%changelog
* Sat Oct 04 2025 Jens Petersen <petersen@redhat.com> - 3.6.4-37
- source package renamed from pandoc to ghc-pandoc (#2360949)
  thanks to Benson Muite
- sync deps from pandoc-3.6.4-36

* Fri Aug 15 2025 Jens Petersen <petersen@redhat.com> - 3.6.4-1
- update to 3.6.4

* Fri Apr 18 2025 Jens Petersen <petersen@redhat.com> - 3.6-1
- spec file generated by cabal-rpm-2.3.1
