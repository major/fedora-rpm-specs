# Generated by rust2rpm 27
# * The tests rely on using the crate as an external path-based dev-dependency.
#   This is deeply uncustomary, but works in git checkouts. It fails entirely
#   when testing the published crate, as `get_size2` is an unresolved import.
%bcond check 0
%global debug_package %{nil}

%global crate get-size2

Name:           rust-get-size2
Version:        0.7.0
Release:        %autorelease
Summary:        Determine the size in bytes an object occupies inside RAM

License:        MIT OR Apache-2.0
URL:            https://crates.io/crates/get-size2
Source:         %{crates_source}
# * Fix missing LICENSE file in the published get-size2 crate
# * https://github.com/bircni/get-size2/pull/36
Source10:       https://github.com/bircni/get-size2/raw/b6f29700a268daa9e3fd1954bfe04906e43d90f7/LICENSE
# Manually created patch for downstream crate metadata changes
Patch:          get-size2-fix-metadata.diff

BuildRequires:  cargo-rpm-macros >= 24

%global _description %{expand:
Determine the size in bytes an object occupies inside RAM.}

%description %{_description}

%package        devel
Summary:        %{summary}
BuildArch:      noarch

%description    devel %{_description}

This package contains library source intended for building other packages which
use the "%{crate}" crate.

%files          devel
%license %{crate_instdir}/LICENSE
%doc %{crate_instdir}/README.md
%{crate_instdir}/

%package     -n %{name}+default-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+default-devel %{_description}

This package contains library source intended for building other packages which
use the "default" feature of the "%{crate}" crate.

%files       -n %{name}+default-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+bytes-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+bytes-devel %{_description}

This package contains library source intended for building other packages which
use the "bytes" feature of the "%{crate}" crate.

%files       -n %{name}+bytes-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+chrono-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+chrono-devel %{_description}

This package contains library source intended for building other packages which
use the "chrono" feature of the "%{crate}" crate.

%files       -n %{name}+chrono-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+chrono-tz-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+chrono-tz-devel %{_description}

This package contains library source intended for building other packages which
use the "chrono-tz" feature of the "%{crate}" crate.

%files       -n %{name}+chrono-tz-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+compact-str-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+compact-str-devel %{_description}

This package contains library source intended for building other packages which
use the "compact-str" feature of the "%{crate}" crate.

%files       -n %{name}+compact-str-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+derive-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+derive-devel %{_description}

This package contains library source intended for building other packages which
use the "derive" feature of the "%{crate}" crate.

%files       -n %{name}+derive-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+get-size-derive2-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+get-size-derive2-devel %{_description}

This package contains library source intended for building other packages which
use the "get-size-derive2" feature of the "%{crate}" crate.

%files       -n %{name}+get-size-derive2-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+hashbrown-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+hashbrown-devel %{_description}

This package contains library source intended for building other packages which
use the "hashbrown" feature of the "%{crate}" crate.

%files       -n %{name}+hashbrown-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+indexmap-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+indexmap-devel %{_description}

This package contains library source intended for building other packages which
use the "indexmap" feature of the "%{crate}" crate.

%files       -n %{name}+indexmap-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+smallvec-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+smallvec-devel %{_description}

This package contains library source intended for building other packages which
use the "smallvec" feature of the "%{crate}" crate.

%files       -n %{name}+smallvec-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+thin-vec-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+thin-vec-devel %{_description}

This package contains library source intended for building other packages which
use the "thin-vec" feature of the "%{crate}" crate.

%files       -n %{name}+thin-vec-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+url-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+url-devel %{_description}

This package contains library source intended for building other packages which
use the "url" feature of the "%{crate}" crate.

%files       -n %{name}+url-devel
%ghost %{crate_instdir}/Cargo.toml

%prep
%autosetup -n %{crate}-%{version} -p1
# Copy the license file into the source.
cp -p '%{SOURCE10}' .
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires

%build
%cargo_build

%install
%cargo_install

%if %{with check}
%check
%cargo_test
%endif

%changelog
%autochangelog
